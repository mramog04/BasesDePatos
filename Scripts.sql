CREATE TABLE TICKETS (
    TICKET_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DNI VARCHAR2(9) NOT NULL,
    PRICE NUMBER(5,2) NOT NULL,
    DATESTARTVALIDITY DATE NOT NULL,
    DATEENDVALIDITY DATE NOT NULL
);

CREATE TABLE VIPPASSES (
    TICKET_ID NUMBER PRIMARY KEY NOT NULL,
    FOREIGN KEY (TICKET_ID) REFERENCES TICKETS(TICKET_ID)
);

CREATE TABLE GUIDEDENTRIES (
    TICKET_ID NUMBER PRIMARY KEY NOT NULL,
    ROUTES_ID NUMBER,
    FOREIGN KEY (TICKET_ID) REFERENCES TICKETS(TICKET_ID),
    FOREIGN KEY (ROUTES_ID) REFERENCES ROUTES(ROUTES_ID)
);

CREATE TABLE ACCOUNTS (
    ACCOUNTID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(50) NOT NULL,
    USERNAME VARCHAR2(50) NOT NULL,
    BIRTHDATE DATE NOT NULL,
    LANGUAGE NVARCHAR2(20) NOT NULL
);

CREATE TABLE ACCTIC (
    TICKET_ID NUMBER PRIMARY KEY NOT NULL,
    ACCOUNTID NUMBER PRIMARY KEY NOT NULL,
    FOREIGN KEY (TICKET_ID) REFERENCES TICKETS(TICKET_ID),
    FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNTS(ACCOUNTID)
);

CREATE TABLE PAYMENTMETHODS (
    ACCOUNTID NUMBER PRIMARY KEY NOT NULL,
    PAYMENTMETHOD NVARCHAR2(20) NOT NULL,
    FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNTS(ACCOUNTID)
);

CREATE TABLE DISCOUNTS (
    DISCOUNTID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DISCOUNTNAME VARCHAR2(20) NOT NULL,
    PERCENTAGE NUMBER NOT NULL
);

CREATE TABLE CONTRACTS (
    CONTRACTID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    STARTDATE DATE NOT NULL,
    FINISHDATE DATE NOT NULL,
    BASESALARY NUMBER(6,2) NOT NULL,
    EXTRA_PERCENT NUMBER NOT NULL,
    HOURS NUMBER NOT NULL,
    BANKACCOUNT VARCHAR2(20) NOT NULL
);

CREATE TABLE DAYS (
    CONTRACTID NUMBER PRIMARY KEY NOT NULL,
    DAYS NVARCHAR2(20) NOT NULL,
    FOREIGN KEY (CONTRACTID) REFERENCES CONTRACTS(CONTRACTID)
);

CREATE TABLE EMPCON (
    EMPLOYEEID NUMBER PRIMARY KEY NOT NULL,
    CONTRACTID NUMBER PRIMARY KEY NOT NULL,
    BONUSPAY NUMBER(6,2) NOT NULL,
    EXTRAHOURSPAY NUMBER NOT NULL,
    CONSTRAINT fk_EmpConEmp FOREIGN KEY (EMPLOYEEID) REFERENCES EMPLOYEES(EMPLOYEEID),
    CONSTRAINT fk_EmpConCon FOREIGN KEY (CONTRACTID) REFERENCES CONTRACTS(CONTRACTID),
);

CREATE TABLE Sections (
    SectionID NUMBER PRIMARY KEY,
    SectionName NVARCHAR2(100) NOT NULL,
    Size NUMBER NOT NULL,
    Visitors NUMBER,
);

CREATE TABLE Enclosures (
    EnclosureID CHAR(5) PRIMARY KEY,
    Species NVARCHAR2(200),
    EnclosureFloorMaterial NUMBER NOT NULL,
    DateLastInspection DATE,
    DateNextInspection DATE NOT NULL,
    SectionID NUMBER,
    CONSTRAINT EnclosureSection FOREIGN KEY (SectionID) REFERENCES Sections(SectionID)
);

CREATE TABLE Enclosureitems (
    EnclosureitemID NUMBER PRIMARY KEY,
    Nombre NVARCHAR2(100) NOT NULL,
    EnclosureID CHAR(5),
    CONSTRAINT EnclosureEnclosureItem FOREIGN KEY (EnclosureID) REFERENCES Enclosures(EnclosureID)
);

CREATE TABLE Shops (
    ShopID NUMBER PRIMARY KEY,
    ShopName NVARCHAR2(100) NOT NULL,
    SectionID NUMBER,
    CONSTRAINT ShopSection FOREIGN KEY (SectionID) REFERENCES Sections(SectionID)
);

CREATE TABLE Products (
    ProductID NUMBER PRIMARY KEY,
    ProductName NVARCHAR2(100) NOT NULL,
    Price NUMBER(6,2) NOT NULL,
    ExpirationDate DATE
);

CREATE TABLE ShoPro (
    ShopID NUMBER,
    ProductID NUMBER,
    PRIMARY KEY (ShopID, ProductID),
    CONSTRAINT fk_shop FOREIGN KEY (ShopID) REFERENCES Shops(ShopID),
    CONSTRAINT fk_product FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
);

CREATE TABLE ShoProSec (
    ShopID NUMBER,
    ProductID NUMBER,
    SectionID NUMBER,
    PRIMARY KEY (ShopID, ProductID, SectionID),
    CONSTRAINT fk_shopro FOREIGN KEY (ShopID, ProductID) REFERENCES ShoPro(ShopID, ProductID),
    CONSTRAINT fk_section FOREIGN KEY (SectionID) REFERENCES Sections(SectionID)
);

CREATE TABLE Employee (
    EmployeeID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DNI VARCHAR2(9) NOT NULL,
    Name NVARCHAR2(100) NOT NULL,
    Surname NVARCHAR2(100) NOT NULL,
    Gender NVARCHAR2(20) NOT NULL,
    DateFirstContract DATE NOT NULL,
    Email NVARCHAR2(50) NOT NULL,
    TelefoneNumber NUMBER NOT NULL,
    Stree/Avenue NVARCHAR2(100) NOT NULL,
    /* Number NUMBER NOT NULL, */
    Location NVARCHAR2(100) NOT NULL,
    ContactDNI VARCHAR2(9) NOT NULL,
    CONSTRAINT fk_ConEm FOREIGN KEY (ContactDNI) REFERENCES EmergencyContacts(DNI);
);

CREATE TABLE EmergencyContacts (
    DNI VARCHAR2(9) PRIMARY KEY,
    PhoneNumber NUMBER NOT NULL
    FullName NVARCHAR2(100) NOT NULL
);

CREATE TABLE Languages (
    EmployeeId NUMBER PRIMARY KEY,
    Languages NVARCHAR2(20) NOT NULL,
);

CREATE TABLE SecurityEmployees (
    EmployeeID NUMBER PRIMARY KEY,
    Shift NVARCHAR2(20) NOT NULL,
    ExtraHoures NUMBER NOT NULL,
    CONSTRAINT fk_SecEmp FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)
);

CREATE TABLE StructualEmployees (
    EmployeeID NUMBER PRIMARY KEY,
    Shift NVARCHAR2(20) NOT NULL,
    ExtraHoures NUMBER NOT NULL,
    CONSTRAINT fk_StrEmp FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)
);

CREATE TABLE AnimalEmployees (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_AniEmp FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)
);  

CREATE TABLE Guard (
    EmployeeID NUMBER PRIMARY KEY,
    Rank NVARCHAR2(20) NOT NULL,
    CONSTRAINT fk_Guard FOREIGN KEY (EmployeeID) REFERENCES SecurityEmployees(EmployeeID)
);

CREATE TABLE Surveillance (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_Surveillance FOREIGN KEY (EmployeeID) REFERENCES Guard(EmployeeID)
);

CREATE TABLE Cleaners (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_Cleaners FOREIGN KEY (EmployeeID) REFERENCES StructualEmployees(EmployeeID)
);

CREATE TABLE ShopKeepers (
    EmployeeID NUMBER PRIMARY KEY,
    ShopID NUMBER,
    CONSTRAINT fk_ShopKeepers FOREIGN KEY (EmployeeID) REFERENCES StructualEmployees(EmployeeID),
    CONSTRAINT fk_ShopShopKeepers FOREIGN KEY (ShopID) REFERENCES Shops(ShopID)
);

CREATE TABLE TicketSellers (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_TicketSellers FOREIGN KEY (EmployeeID) REFERENCES StructualEmployees(EmployeeID)
);

CREATE TABLE Inspectors (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_Inspectors FOREIGN KEY (EmployeeID) REFERENCES StructualEmployees(EmployeeID)
);

CREATE TABLE CareTaker (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_CareTaker FOREIGN KEY (EmployeeID) REFERENCES AnimalEmployees(EmployeeID)
);

CREATE TABLE Veterinaries (
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_Veterinaries FOREIGN KEY (EmployeeID) REFERENCES AnimalEmployees(EmployeeID)
);

CREATE TABLE SecGua (
    EmployeeID NUMBER PRIMARY KEY,
    SectionID NUMBER PRIMARY KEY,
    AccidentDate DATE NOT NULL,
    AccidentCost NUMBER NOT NULL,
    CONSTRAINT fk_SecGuaEmp FOREIGN KEY (EmployeeID) REFERENCES SecurityEmployees(EmployeeID),
    CONSTRAINT fk_SecGuaSec FOREIGN KEY (SectionID) REFERENCES SectionId(SectionID),
);

CREATE TABLE WeaponLicences (
    EmployeeID NUMBER PRIMARY KEY,
    WeaponLicencesID NUMBER PRIMARY KEY,
    WeaponName NVARCHAR2(20) NOT NULL,
    ExpirationDate DATE NOT NULL,
);

CREATE TABLE Weapon (
    WeaponLicencesID NUMBER PRIMARY KEY,
    WeaponID NUMBER PRIMARY KEY,
    CONSTRAINT fk_WeaponLicences FOREIGN KEY (WeaponLicencesID) REFERENCES WeaponLicences(WeaponLicencesID)
);

CREATE TABLE SecSur (
    EmployeeID NUMBER PRIMARY KEY,
    SectionID NUMBER PRIMARY KEY,
    AccidentDate DATE NOT NULL,
    AccidentCost NUMBER NOT NULL,
    CONSTRAINT fk_SecSurEmp FOREIGN KEY (EmployeeID) REFERENCES SecurityEmployees(EmployeeID),
    CONSTRAINT fk_SecSurSec FOREIGN KEY (SectionID) REFERENCES SectionId(SectionID),
);

CREATE TABLE SecCle (
    EmployeeID NUMBER PRIMARY KEY,
    SectionID NUMBER PRIMARY KEY,
    AccidentDate DATE NOT NULL,
    AccidentCost NUMBER NOT NULL,
    CONSTRAINT fk_SecCleEmp FOREIGN KEY (EmployeeID) REFERENCES SecurityEmployees(EmployeeID),
    CONSTRAINT fk_SecCleSec FOREIGN KEY (SectionID) REFERENCES SectionId(SectionID),
);

CREATE TABLE AniVet (
    InterventionID NUMBER PRIMARY KEY,
    AnimalID NUMBER,
    EmployeeID NUMBER,
    CostOfTreatment NUMBER NOT NULL,
    CONSTRAINT fk_AniVetEmp FOREIGN KEY (EmployeeID) REFERENCES Veterinaries(EmployeeID),
    CONSTRAINT fk_AniVetAni FOREIGN KEY (AnimalID) REFERENCES Animal(AnimalID),
);

CREATE TABLE Studies (
    EmployeeID NUMBER PRIMARY KEY,
    Studies NVARCHAR2(100) NOT NULL,
    CONSTRAINT fk_Studies FOREIGN KEY (EmployeeID) REFERENCES Veterinaries(EmployeeID),
);

CREATE TABLE Routes (
    RouteID NUMBER PRIMARY KEY,
    RouteName NVARCHAR2(100) NOT NULL,
    EstimatedLengthTime NUMBER NOT NULL,
    StartHour TIME NOT NULL,
    SectionID NUMBER,
    CONSTRAINT fk_RoutesSec FOREIGN KEY (SectionID) REFERENCES Sections(SectionID);
);

CREATE TABLE Animals (
    AnimalID NUMBER PRIMARY KEY,
    Species NVARCHAR2(100) NOT NULL,
    Sex NVARCHAR2(20) NOT NULL,
    Weight NUMBER NOT NULL,
    Birthdate DATE NOT NULL,
    TimeAtTheZoo NUMBER NOT NULL,
    MorningFood NVARCHAR2(100) NOT NULL,
    NightFood NVARCHAR2(100) NOT NULL,
    Medicine NVARCHAR2(100) NOT NULL,
    DateOfArrival DATE NOT NULL,
);

CREATE TABLE Parents (
    AnimalID NUMBER PRIMARY KEY,
    ParentID NUMBER PRIMARY KEY,
    CONSTRAINT fk_Parents FOREIGN KEY (AnimalID) REFERENCES Animals(AnimalID),
    CONSTRAINT fk_Parents FOREIGN KEY (ParentID) REFERENCES Animals(AnimalID),
);

CREATE TABLE Illnesses (
    AnimalId NUMBER PRIMARY KEY,
    Illnesses NVARCHAR2(100) NOT NULL PRIMARY KEY,
    CONSTRAINT fk_Illnesses FOREIGN KEY (AnimalId) REFERENCES Animals(AnimalID),
);

CREATE TABLE EncAni (
    EnclosureID CHAR(5) PRIMARY KEY,
    Species NVARCHAR(100) NOT NULL,
    Population NUMBER NOT NULL,
    CONSTRAINT fk_EncAniEnc FOREIGN KEY (EnclosureID) REFERENCES Enclosures(EnclosureID),
    CONSTRAINT fk_EncAniAni FOREIGN KEY (AnimalID) REFERENCES Animals(AnimalID),
);

CREATE TABLE GuiRou (
    RouteID NUMBER PRIMARY KEY,
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_GuiRouEmp FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID),
    CONSTRAINT fk_GuiRouRou FOREIGN KEY (RouteID) REFERENCES Routes(RouteID),
);

CREATE TABLE EncIns (
    EnclosureID CHAR(5) PRIMARY KEY,
    EmployeeID NUMBER PRIMARY KEY,
    DateNextInspection DATE NOT NULL,
    DateLastInspection DATE NOT NULL,
    CONSTRAINT fk_EncInsEmp FOREIGN KEY (EmployeeID) REFERENCES Inspectors(EmployeeID),
    CONSTRAINT fk_EncInsEnc FOREIGN KEY (EnclosureID) REFERENCES Enclosures(EnclosureID),
);

CREATE TABLE EncCar (
    EnclosureID CHAR(5) PRIMARY KEY,
    EmployeeID NUMBER PRIMARY KEY,
    CONSTRAINT fk_EncCarEmp FOREIGN KEY (EmployeeID) REFERENCES CareTaker(EmployeeID),
    CONSTRAINT fk_EncCarEnc FOREIGN KEY (EnclosureID) REFERENCES Enclosures(EnclosureID),
);

CREATE TABLE Species (
    EnclosureID CHAR(5) PRIMARY KEY,
    Species NVARCHAR2(100) NOT NULL PRIMARY KEY,
    CONSTRAINT fk_SpeciesEnc FOREIGN KEY (EnclosureID) REFERENCES Enclosures(EnclosureID),
)


